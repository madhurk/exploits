package test.madhur.io;

import retrofit.RestAdapter;
import retrofit.android.AndroidLog;
import test.madhur.api.CourseraApi;
import test.madhur.model.Catalog;
import test.madhur.model.Element;

/**
 * Created by madhurkhandelwal on 8/6/15.
 */
public class CatalogFetcher {

    public static final String BASE_URL = "https://api.coursera.org/api/catalog.v1";
    RestAdapter restAdapter;
    CourseraApi apiService;

    public CatalogFetcher() {
        restAdapter = new RestAdapter.Builder().setEndpoint(BASE_URL).//build();
                setLogLevel(RestAdapter.LogLevel.BASIC).setLog(new AndroidLog("Retrofit")).build();
        apiService = restAdapter.create(CourseraApi.class);
    }

    public Catalog getCatalog() {
        return apiService.getCatalog("smallIcon,instructor,universityLogo,shortDescription");
    }

    public Element getCourse(int courseId){
        Catalog catalog = apiService.getCourse("largeIcon,universityLogo,shortDescription", courseId);
        if(catalog != null && catalog.getElements() != null && catalog.getElements().size() > 0) {
            Element course = catalog.getElements().get(0);
            return course;
        }

        return null;
    }
}
